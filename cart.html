<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./css/style.css">
  <!-- FONT AWSOME -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.8/dist/vue.js"></script>
  <script src="./assets/files/jquery-3.6.0.js"></script>
</head>

<body>
  <!-- HEADER START -->
  <header>
    <h1>
      <a href="/main.html">Liquor Stores<i class="fa-solid fa-martini-glass"></i></a>
    </h1>
  </header>
  <!-- HEADER END -->

  <!-- NAV START -->
  <nav class="gnav">
    <ul class="gnav_wrapper">
      <li><a href="/beer.html">Beer</a></li>
      <li><a href="/wine.html">Wine</a></li>
      <li><a href="/sake.html">Sake</a></li>
      <li><a href="/other.html">Other</a></li>
      <!-- <li><a href="/main.html">Logout</a></li> -->
      <li><a href="/login.html">Login</a></li>
      <li><a href="/cart.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
    </ul>
  </nav>
  <!-- NAV END -->

  <main>
    <div>
      <!-- table and button need css -->
      <span>Customer Name: <b></b></span>
      <select id="userSelectBox">
      </select>
      <button type="button">display user</button>
  </div>
  <div>
      <table>
          <thead>
              <tr>
                  <th>ID</th>
                  <th>user First Name</th>
                  <th>user Last Name</th>
                  <th>credit card</th>
                  <th>expiry date</th>
              </tr>
          </thead>
          <tbody>

          </tbody>
      </table>
  </div>
    <h2>Your cart</h2>
    <div id="vueapp" class="cart-wrap" >
    <div class="cart-summary">
        <div class="cart-item-detail-pic"></div>
          <h3>Boujee Sparkling Rose</h3>
          <span>300ML</span>
          <span class="cart-item-price">$6.35</span>
          <div class="quantity">
            <select>
              <option value="0">Quantity</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>    
    </div>
    <div class="cart-summary">
        <div class="cart-item-detail-pic"></div>
          <h3>Blasted Church Vineyards Big Bang Theorye</h3>
          <span>300ML</span>
          <span class="cart-item-price">$6.35</span>
          <div class="quantity">
            <select>
              <option value="0">Quantity</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>    
    </div>
    <div class="total">
    <h3>Total: <span>$6.35</span></h3>
    <button class="checkout-btn" onClick="location.href='/order.html'">Checkout</button>
    </div>
  </div>
   
  </main>

<!-- FOOTER -->
<footer>
  <aside>
    <a href="./privacyPolicy.html">Privacy Policy</a>
  </aside>
  <p>&copy;Copyright 2022 Final Project</p>
</footer>

</body>
<script> 
/**
 *disp;ay user information in a table during the checkout
 * @author Matheus Rodrigues
 */
// I used Jquery to load the user information in a table instead of using angular
    //  $('button').click(function(){
    //     $('.modal').show();
    // });
    // $('.close').click(function(){
    //     $('.modal').hide();
    // });
    
    // $.getJSON("./assets/files/user.json",function(data){
    //     $.each(data,function(index,obj){
    //         let tr=$('<tr></tr>');
    //         $.each(obj,function(key,value){
    //             let td=$('<td></td>')
    //             td.text(value);
    //             tr.append(td);
    //         });
    //         $('tbody').append(tr);
    //  })
    // })
    // get the json file and display user id and frist name in the select box
    // when it was selected should display the user infotmation in the table
    let selectedUser = "";
    let userlist=new Map();
    $.getJSON('./assets/files/user.json',function(data){
        $.each(data,function(index,userObj){
            let option = $('<option></option>');
            option.val(userObj.userID);
            option.text(userObj.firstname);
            $('#userSelectBox').append(option);
        })
    });
    $('#userSelectBox').change(function(){
        let userID = parseInt($(this).val());
        $.getJSON('./assets/files/user.json',function(data){
            $.each(data,function(index,userObj){
                if(userID==userObj.userid){
                    selectedUser = new user(userObj.userid,userObj.email,userObj.password,userObj.firstname,userObj.lastname,userObj.bornDate,userObj.country,userObj.address,userObj.phoneNumber,userObj.creditCard,userObj.expiryDate);
                    $('b').eq(0).text(selectedUser.firstname+" "+selectedUser.lastname);
                }
            })
        })
    })
    function user(userID,email,password,firstname,lastname,bornDate,country,address,phoneNumber,creditCard,expiryDate){
       this.userID=userID;
       this.email=email;
       this.password=password;
       this.firstname=firstname;
       this.lastname=lastname;
       this.bornDate=bornDate;
       this.country=country;
       this.address=address;
       this.phoneNumber=phoneNumber;
       this.creditCard=creditCard;
       this.expiryDate=expiryDate;
    }
    $('button').eq(0).click(function(){
        let seeuser = new user(selectedUser.userID,selectedUser.email,selectedUser.firstname,selectedUser.lastname,selectedUser.bornDate,selectedUser.country,selectedUser.address,selectedUser.phoneNumber,selectedUser.creditCard,selectedUser.expiryDate);
        seeuser.set(userlist.userID,userObj);
        $('#userSelectBox').val("");
        populateTable();
    });
    function populateTable(){
        $('tbody').children().remove();
        userlist.forEach(function(user,userID){
            let tr = $('<tr></tr>');
            let td_id = $('<td>'+userID+'</td>');
            tr.append(td_id);
            let td_name = $('<td>'+user.firstname+'</td>');
            tr.append(td_name);
            let td_lastname = $('<td>'+user.lastname+'</td>');
            tr.append(td_price);
            let td_card = $('<td>'+user.creditCard+'</td>');
            tr.append(td_card);
            let td_expirydate = $('<td>'+user.expiryDate+'</td>');
            $('tbody').append(tr);
        })
    }
    
</script>
</html>
